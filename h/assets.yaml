# the full version of bootstrap, used
# by admin pages.
#
# The site uses a minimal version that only has the
# features we need
bootstrap_full_js:
  filters: uglifyjs
  output: scripts/vendor/bootstrap.min.js
  contents: ../../node_modules/bootstrap/dist/js/bootstrap.js
bootstrap_full_css:
  filters: cleancss
  output: styles/vendor/bootstrap.min.css
  contents: ../../node_modules/bootstrap/dist/css/bootstrap.css


# jQuery
jquery:
  filters: uglifyjs
  output: scripts/vendor/jquery.min.js
  contents: ../../node_modules/jquery/dist/jquery.js


polyfills:
  contents: h:static/scripts/polyfills.bundle.js


# Admin areas
admin_css:
  contents:
    - bootstrap_full_css
    - output: styles/admin.min.css
      filters: cleancss
      contents:
        - output: h:static/styles/admin.css
          filters: compass,postcss
          contents:
            - h:static/styles/admin.scss
admin_js:
  contents:
    - jquery
    - bootstrap_full_js


# the H client application
app_js:
  contents:
    - jquery
    - polyfills
    - h:static/scripts/app.bundle.js


app_css:
  output: styles/app.min.css
  filters: cleancss
  contents:
    - h:static/styles/vendor/angular-csp.css
    - ../../node_modules/angular-toastr/dist/angular-toastr.css
    - h:static/styles/vendor/icomoon.css
    - h:static/styles/vendor/katex.min.css
    - output: styles/app.css
      filters: compass,postcss
      contents:
        - h:static/styles/app.scss
      depends:
        - h:static/styles/*.scss
        - h:static/styles/mixins/*.scss


# The inject bundle is intended to be loaded into pages for bootstrapping
# the application. It sets up RPC channels for cross-domain communication
# between frames participating in annotation by using the annotator bridge
# plugin.
inject:
  contents:
    - inject_css
    - inject_js

inject_js:
  contents:
  - jquery
  - polyfills
  - h:static/scripts/hypothesis.bundle.js

inject_css:
  output: styles/hypothesis.min.css
  filters: cleancss
  contents:
    - h:static/styles/vendor/icomoon.css
    - output: styles/hypothesis.css
      filters: compass,postcss
      contents:
        - h:static/styles/annotator/inject.scss
        - h:static/styles/annotator/pdfjs-overrides.scss
      depends:
        - h:static/styles/annotator/*.scss
        - h:static/styles/base.scss
        - h:static/styles/reset.scss
        - h:static/styles/variables.scss
        - h:static/styles/mixins/icons.scss

# the H website
site_js:
  contents:
   - h:static/scripts/config.bundle.js

site_css:
  output: styles/site.min.css
  filters: cleancss
  contents:
    - h:static/styles/vendor/icomoon.css
    - output: h:static/styles/site.css
      filters: compass,postcss
      contents:
        - h:static/styles/site.scss
      depends:
        - h:static/styles/*.scss

# Assets needed for the legacy H website front page only.
# This will be removed once the new homepage design is live
# (see https://trello.com/c/h6kQMQG8/187-new-homepage-design)
front_page_js:
  contents:
    - jquery
    - bootstrap_full_js

front_page_css:
  output: styles/front-page.min.css
  contents:
    - h:static/styles/front-page/main.css
    - output: h:static/styles/front-page.css
      filters: cleancss
      contents:
      - h:static/styles/vendor/icomoon.css


# Help page
help_page_css:
  output: styles/help-page.min.css
  filters: cleancss
  contents:
    - h:static/styles/vendor/icomoon.css
    - output: styles/help-page.css
      filters: compass,postcss
      contents:
        - h:static/styles/help-page.scss
      depends:
        - h:static/styles/*.scss
        - h:static/styles/mixins/*.scss
